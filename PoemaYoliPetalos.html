<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Poema para Yoli</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
    body {
      margin: 0;
      background: linear-gradient(to top left, #ffe6f0, #fff0f5);
      font-family: 'Dancing Script', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    .container {
      background: white;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
      text-align: center;
      max-width: 500px;
      width: 90%;
      animation: fadeIn 1.5s ease;
      position: relative;
      z-index: 1;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    input[type="password"] {
      padding: 0.7rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      width: 80%;
      margin: 1rem 0;
      font-size: 1rem;
    }
    button {
      padding: 0.6rem 1.5rem;
      background-color: #ff69b4;
      color: white;
      border: none;
      font-size: 1rem;
      border-radius: 15px;
      cursor: pointer;
      transition: background 0.3s;
      margin: 0.5rem;
    }
    button:hover {
      background-color: #ff1493;
    }
    .error {
      color: red;
      margin-top: 1rem;
      font-size: 0.9rem;
    }
    #poemText {
      font-size: 1.5rem;
      margin-top: 1rem;
      animation: typing 3s steps(40, end), blink-caret .75s step-end infinite;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid pink;
    }
    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: pink; }
    }
    #finalChoice {
      margin-top: 2rem;
    }
    #message {
      font-size: 1.3rem;
      margin-top: 1rem;
      color: #d63384;
    }
    .shrink {
      animation: shrinkAway 3s forwards;
    }
    @keyframes shrinkAway {
      0% { transform: scale(1); }
      100% { transform: scale(0) translate(300px, -300px); }
    }

    .petal {
      position: fixed;
      top: -50px;
      width: 20px;
      height: 20px;
      background: pink;
      border-radius: 50%;
      opacity: 0.8;
      pointer-events: none;
      z-index: 0;
      animation: fall 6s linear infinite;
    }
    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container" id="login">
    <h2>Hola, Yoli 💕</h2>
    <p>Ingresa la contraseña para recibir tu frase del día:</p>
    <input type="password" id="password" placeholder="Contraseña" />
    <br />
    <button onclick="checkPassword()">Entrar</button>
    <div class="error" id="error"></div>
  </div>
  <div class="container" id="poem" style="display: none;">
    <h2>Tu frase del día 💌</h2>
    <p id="poemText"></p>
    <div id="finalChoice" style="display: none;">
      <p>¿Quieres salir conmigo? 💖</p>
      <button onclick="responder('si')">Sí</button>
      <button onclick="responder('no')">No</button>
    </div>
    <p id="message"></p>
  </div>
  <audio id="backgroundMusic" autoplay loop>
    <source id="musicSource" src="" type="audio/mp3">
  </audio>
  <script>
    const frases = [
      "Eres la luz que ilumina mis días.",
      "Tus ojos son el cielo en el que me pierdo.",
      "Cada palabra tuya es música para mi alma.",
      "Eres el verso más bello de mi poesía.",
      "Contigo, hasta el silencio tiene sentido.",
      "Mi mundo gira con tu sonrisa.",
      "Tu presencia hace florecer mi corazón.",
      "Eres mi inspiración diaria.",
      "En tus abrazos encuentro mi hogar.",
      "Eres mi calma en medio del caos.",
      "Tus pasos marcan el ritmo de mi alegría.",
      "Contigo todo es más bonito.",
      "Mi amor por ti crece con cada amanecer.",
      "Eres el sueño que no quiero despertar.",
      "¿Quieres salir conmigo? 💘"
    ];
    const canciones = [
      "happy_together.mp3",
      "as_it_was.mp3",
      "locked_out_of_heaven.mp3",
      "cuando_quieras.mp3"
    ];
    function checkPassword() {
      const input = document.getElementById("password").value;
      if (input === "Yoli") {
        const today = new Date().toISOString().split("T")[0];
        let firstDate = localStorage.getItem("firstDate");
        if (!firstDate) {
          localStorage.setItem("firstDate", today);
          firstDate = today;
        }
        showPoem(firstDate, today);
      } else {
        document.getElementById("error").textContent = "Contraseña incorrecta.";
      }
    }
    function showPoem(startDate, currentDate) {
      document.getElementById("login").style.display = "none";
      document.getElementById("poem").style.display = "block";
      const dayDiff = Math.floor((new Date(currentDate) - new Date(startDate)) / (1000 * 60 * 60 * 24));
      const index = Math.min(dayDiff, frases.length - 1);
      document.getElementById("poemText").textContent = frases[index];
      const audio = document.getElementById("backgroundMusic");
      const musicSource = document.getElementById("musicSource");
      if (index === frases.length - 1) {
        musicSource.src = "enamorado_final.mp3";
        document.getElementById("finalChoice").style.display = "block";
      } else {
        const song = canciones[Math.floor(Math.random() * canciones.length)];
        musicSource.src = song;
      }
      audio.load();
      audio.play();
    }
    function responder(resp) {
      const poemDiv = document.getElementById("poem");
      const msg = document.getElementById("message");
      if (resp === "si") {
        msg.textContent = "¡Me haces la persona más feliz del mundo! 💞";
        lanzarPetalos();
      } else {
        poemDiv.classList.add("shrink");
        msg.textContent = "Oops... parece que escapaste 🫣";
        setTimeout(() => {
          poemDiv.style.display = "none";
        }, 3000);
      }
    }
    function lanzarPetalos() {
      for (let i = 0; i < 40; i++) {
        const petalo = document.createElement("div");
        petalo.className = "petal";
        petalo.style.left = Math.random() * 100 + "vw";
        petalo.style.animationDuration = (Math.random() * 3 + 3) + "s";
        document.body.appendChild(petalo);
        setTimeout(() => petalo.remove(), 6000);
      }
    }
  </script>
</body>
</html>